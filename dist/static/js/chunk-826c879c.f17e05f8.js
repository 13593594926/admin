(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-826c879c"],{b1c3:function(e,t,r){"use strict";var a=r("f6f4"),s=r.n(a);s.a},e616:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home/index"}}},[e._v(" 首页 ")]),r("el-breadcrumb-item",[e._v(" 用户管理")]),r("el-breadcrumb-item",[e._v(" 用户列表")])],1),r("el-card",{staticClass:"box-card"},[r("el-row",[r("div",{staticClass:"el-col el-col-8"},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.getusers},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getusers},slot:"append"})],1)],1),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addUser=!0}}},[e._v("添加")])],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"index",label:"#",width:"100"}}),r("el-table-column",{attrs:{prop:"username",label:"姓名"}}),r("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),r("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),r("el-table-column",{attrs:{prop:"role_name",label:"角色"}}),r("el-table-column",{attrs:{label:"状态",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(r){return e.state(t.row.id,t.row.mg_state)}},model:{value:t.row.mg_state,callback:function(r){e.$set(t.row,"mg_state",r)},expression:"scope.row.mg_state"}})]}}])}),r("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(r){return e.up(t.row.id)}}}),r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(r){return e.del(t.row.id)}}}),r("el-tooltip",{attrs:{content:"分配权限",placement:"top"}},[r("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-setting"},on:{click:function(t){e.role=!0}}})],1)]}}])})],1),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{"page-sizes":[1,2,5,10],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("el-dialog",{attrs:{title:"添加用户",visible:e.addUser},on:{"update:visible":function(t){e.addUser=t}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),r("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[r("el-input",{model:{value:e.ruleForm.mobile,callback:function(t){e.$set(e.ruleForm,"mobile",t)},expression:"ruleForm.mobile"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addUser=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.adduser}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"编辑用户",visible:e.update},on:{"update:visible":function(t){e.update=t}}},[r("el-form",{ref:"ruup",staticClass:"demo-ruleForm",attrs:{model:e.upUser,rules:e.ruup,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.upUser.username,callback:function(t){e.$set(e.upUser,"username",t)},expression:"upUser.username"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.upUser.email,callback:function(t){e.$set(e.upUser,"email",t)},expression:"upUser.email"}})],1),r("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[r("el-input",{model:{value:e.upUser.mobile,callback:function(t){e.$set(e.upUser,"mobile",t)},expression:"upUser.mobile"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.update=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.upda(e.upUser.id,e.upUser.email,e.upUser.mobile)}}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"分配角色",visible:e.role},on:{"update:visible":function(t){e.role=t}}},[r("el-form",[r("el-form-item",{attrs:{label:"当前的用户："}},[e._v(e._s(e.upUser.username))]),r("el-form-item",{attrs:{label:"当前的角色："}},[e._v(e._s(e.upUser.role_name))]),r("el-form-item",{attrs:{label:"分配新角色"}},[r("el-select",{attrs:{placeholder:"请选择"}},e._l(e.roles,(function(e){return r("el-option",{key:e.id,attrs:{label:e.roleName,value:e.roleName}})})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.role=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addrole(e.scope.row.id)}}},[e._v("确 定")])],1)],1)],1)},s=[],n=(r("96cf"),r("1da1")),l=r("7c15"),o={name:"demo",props:[],components:{},data:function(){return{keyword:"",pagenum:1,pagesize:2,list:[],total:0,ruleForm:{username:"",password:"",email:"",mobile:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:18,message:"长度在 3 到 18 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^((\+|00)86)?((134\d{4})|((13[0-3|5-9]|14[1|5-9]|15[0-9]|16[2|5|6|7]|17[0-8]|18[0-9]|19[0-2|5-9])\d{8}))$/,message:"请输入正确的手机号",trigger:"blur"}]},formLabelWidth:"120px",addUser:!1,update:!1,upUser:{},ruup:{email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确邮箱",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^((\+|00)86)?((134\d{4})|((13[0-3|5-9]|14[1|5-9]|15[0-9]|16[2|5|6|7]|17[0-8]|18[0-9]|19[0-2|5-9])\d{8}))$/,message:"请输入正确手机号",trigger:"blur"}]},role:!1,roles:[]}},computed:{breads:function(){return JSON.parse(localStorage.getItem("bread"))}},watch:{},methods:{handleSizeChange:function(e){this.pagesize=e,this.getusers()},handleCurrentChange:function(e){this.pagenum=e,this.getusers()},getusers:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["o"])({query:e.keyword,pagenum:e.pagenum,pagesize:e.pagesize});case 2:r=t.sent,a=r.data,e.list=a.users,e.total=a.total;case 6:case"end":return t.stop()}}),t)})))()},del:function(e){var t=this;console.log(e),this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.rem(e)})).catch((function(){t.$message({type:"info",message:"已取消退出"})}))},rem:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(l["k"])(e);case 2:a=r.sent,s=a.data,t.$message({type:"success",message:s.meta.msg}),t.getusers(),console.log(s);case 7:case"end":return r.stop()}}),r)})))()},adduser:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.addUser=!1,t.next=3,Object(l["a"])(e.ruleForm);case 3:r=t.sent,console.log(r),e.$message({type:"success",message:r.meta.msg}),e.ruleForm.username="",e.ruleForm.password="",e.ruleForm.email="",e.ruleForm.mobile="",e.getusers();case 11:case"end":return t.stop()}}),t)})))()},state:function(e,t){var r=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(e,t),a.next=3,Object(l["n"])(e,t);case 3:s=a.sent,n=s.data,r.$message({type:"success",message:n.meta.msg});case 6:case"end":return a.stop()}}),a)})))()},updaalog:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(l["m"])(e);case 2:a=r.sent,s=a.data,console.log(s),t.upUser=s;case 6:case"end":return r.stop()}}),r)})))()},up:function(e){this.updaalog(e),this.update=!0},upda:function(e,t,r,a){var s=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(l["c"])(e,{email:t,mobile:r});case 2:n=a.sent,o=n.data,console.log(o),s.$message({type:"success",message:o.meta.msg}),s.update=!1,s.getusers();case 8:case"end":return a.stop()}}),a)})))()},getroles:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["roles"])();case 2:r=t.sent,a=r.data,e.roles=a,console.log(e.roles);case 6:case"end":return t.stop()}}),t)})))()},addrole:function(e){this.updaalog(e)}},created:function(){},mounted:function(){this.getusers(),this.getroles()}},i=o,u=(r("b1c3"),r("2877")),c=Object(u["a"])(i,a,s,!1,null,"bbe2b778",null);t["default"]=c.exports},f6f4:function(e,t,r){}}]);
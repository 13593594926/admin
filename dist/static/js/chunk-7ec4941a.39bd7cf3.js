(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ec4941a"],{"145b":function(e,t,r){"use strict";var a=r("ad06"),s=r.n(a);s.a},ad06:function(e,t,r){},caf7:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home/index"}}},[e._v(" 首页 ")]),r("el-breadcrumb-item",[e._v(" 权限管理")]),r("el-breadcrumb-item",[e._v(" 角色列表")])],1),r("el-card",{staticClass:"box-card"},[r("el-row",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogAddRole=!0}}},[e._v("添加角色")])],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roles,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.children,(function(a,s){return r("el-row",{key:s,class:0==s?"h-center bdtottom bdright bdtop":"h-center bdtottom bdright",attrs:{gutter:20,justify:"",align:"middle"}},[r("el-col",{staticClass:"h-center",attrs:{span:5}},[r("div",{staticClass:"grid-content bg-purple v-center"},[r("el-tag",{attrs:{closable:"",effect:"dark",type:"dark"},on:{close:function(r){return e.del(t.row.id,a.id)}}},[e._v(" "+e._s(a.authName)+" ")]),r("i",{staticClass:"el-icon-caret-right"})],1)]),r("el-col",{attrs:{span:19}},[r("div",{staticClass:"grid-content bg-purple"},e._l(a.children,(function(a,s){return r("el-row",{key:s,staticClass:"pd bdtottom h-center",attrs:{gutter:20}},[r("el-col",{staticClass:"h-center",attrs:{span:6}},[r("el-tag",{attrs:{closable:"",effect:"dark",type:"success"},on:{close:function(r){return e.del(t.row.id,a.id)}}},[e._v(" "+e._s(a.authName)+" ")]),r("i",{staticClass:"el-icon-caret-right"})],1),r("el-col",{attrs:{span:18}},e._l(a.children,(function(a,s){return r("el-tag",{key:s,staticClass:"tag-lv3",attrs:{closable:"",effect:"dark",type:"warning"},on:{close:function(r){return e.del(t.row.id,a.id)}}},[e._v(" "+e._s(a.authName)+" ")])})),1)],1)})),1)])],1)}))}}])}),r("el-table-column",{attrs:{type:"index",label:"#"}}),r("el-table-column",{attrs:{prop:"roleName",label:"角色名称"}}),r("el-table-column",{attrs:{prop:"roleDesc",label:"角色描述"}}),r("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(r){return e.isEditList(t.row.id)}}},[e._v("修改")]),r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(r){return e.delrole(t.row.id)}}},[e._v("删除")]),r("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-setting"}},[e._v("分配权限")])]}}])})],1)],1),r("el-dialog",{attrs:{title:"添加角色",visible:e.dialogAddRole},on:{"update:visible":function(t){e.dialogAddRole=t}}},[r("el-form",{ref:"role",staticClass:"demo-dynamic",attrs:{model:e.role,"label-width":"100px"}},[r("el-form-item",{attrs:{prop:"roleName",label:"角色名称",rules:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"}]}},[r("el-input",{model:{value:e.role.roleName,callback:function(t){e.$set(e.role,"roleName",t)},expression:"role.roleName"}})],1),r("el-form-item",{attrs:{prop:"roleName",label:"角色描述",rules:[{required:!0,message:"请输入角色描述",trigger:"blur"}]}},[r("el-input",{model:{value:e.role.roleDesc,callback:function(t){e.$set(e.role,"roleDesc",t)},expression:"role.roleDesc"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogAddRole=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addRoles("role")}}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"修改角色",visible:e.flag},on:{"update:visible":function(t){e.flag=t}}},[r("el-form",{ref:"listForm",staticClass:"demo-ruleForm",attrs:{model:e.editForm,rules:e.rule,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"角色名称","label-width":"120px",prop:"roleName"}},[r("el-input",{model:{value:e.editForm.roleName,callback:function(t){e.$set(e.editForm,"roleName",t)},expression:"editForm.roleName"}})],1),r("el-form-item",{attrs:{label:"角色描述","label-width":"120px",prop:"roleDesc"}},[r("el-input",{model:{value:e.editForm.roleDesc,callback:function(t){e.$set(e.editForm,"roleDesc",t)},expression:"editForm.roleDesc"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.flag=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editList}},[e._v("确 定")])],1)],1)],1)},s=[],l=(r("96cf"),r("1da1")),n=r("7c15"),o={name:"",data:function(){return{roles:[],dialogAddRole:!1,role:{roleName:"",roleDesc:""},flag:!1,editForm:{roleName:"",roleDesc:""},rule:{roleName:[{required:!0,message:"角色名称",trigger:"blur"},{min:3,max:10,message:"长度在 3到 10 个字符",trigger:"blur"}],roleDesc:[{required:!0,message:"角色描述",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}]}}},created:function(){},mounted:function(){this.getRoles()},methods:{getRoles:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["f"])();case 2:r=t.sent,a=r.data,e.roles=a;case 5:case"end":return t.stop()}}),t)})))()},del:function(e,t){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var s,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(n["e"])(e,t);case 2:s=a.sent,l=s.data,r.$message({type:"success",message:l.meta.msg}),r.getRoles();case 6:case"end":return a.stop()}}),a)})))()},addRoles:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;Object(n["b"])(t.role).then((function(e){console.log(e),t.$message({type:"success",message:e.meta.msg}),t.dialogAddRole=!1,t.getRoles()}))}))},delrole:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.dela(e),t.getRoles()})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},dela:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(n["d"])(e);case 2:a=r.sent,s=a.data,console.log(s),t.$message({type:"success",message:s.meta.msg});case 6:case"end":return r.stop()}}),r)})))()},isEditList:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.flag=!0,r.next=3,Object(n["j"])("roles/".concat(e));case 3:a=r.sent,t.editForm=a.data,200==a.meta.status&&t.$message({type:"success",message:a.meta.msg});case 6:case"end":return r.stop()}}),r)})))()},editList:function(e){this.flag=!0,this.editPut()},editPut:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["g"])(e.editForm);case 2:r=t.sent,a=r.data,200==a.meta.status&&(e.flag=!1,e.$message({type:"success",message:"修改成功"}),e.getRoles());case 5:case"end":return t.stop()}}),t)})))()}}},i=o,c=(r("145b"),r("2877")),u=Object(c["a"])(i,a,s,!1,null,"6f6aa618",null);t["default"]=u.exports}}]);